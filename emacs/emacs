(add-to-list 'load-path "~/.emacs.d/lib/")

;; add subdirectories of the lib directory
(let ((default-directory "~/.emacs.d/lib/"))
  (normal-top-level-add-subdirs-to-load-path))

(require 'p4)
(require 'p4v)
(require 'js2-mode)
(require 'git)
(require 'json)

;; multi-term
(require 'multi-term)
(setq multi-term-program "/bin/bash")

;; transpose-frame
(require 'transpose-frame)
(global-set-key (kbd "M-g")   'goto-line)
(global-set-key (kbd "C-x )") 'rotate-frame-clockwise)
(global-set-key (kbd "C-x (") 'rotate-frame-anticlockwise)

;; js-comint
(require 'js-comint)
(setq inferior-js-program-command "node")
(setq inferior-js-mode-hook
      (lambda ()
        ;; We like nice colors
        (ansi-color-for-comint-mode-on)
        ;; Deal with some prompt nonsense
        (add-to-list
         'comint-preoutput-filter-functions
         (lambda (output)
           (replace-regexp-in-string "\033\\[[0-9]+[GKJ]" "" output)))))

;; turn off some annoying 'features'
(setq inhibit-startup-message t)
(setq backup-directory-alist '(("." . "~/.emacs-backups")))

;; sometimes i have to look at compiled JS files (gross)
(setq line-number-display-limit-width 1000)

(add-to-list 'auto-mode-alist '("\\.js\\'" . js2-mode))

;; clear the buffer in eshell
;; src: http://daily-emacs.blogspot.com/2011/11/clear-in-eshell.html
(defun eshell/clear ()
  "clear the eshell buffer."
  (interactive)
  (let ((inhibit-read-only t))
    (erase-buffer))
)

;; spaces 4-ever
(setq-default indent-tabs-mode nil)

;; show date and time
(setq display-time-day-and-date t)
(display-time)

;; hide menu bar
(menu-bar-mode -1)

;; ido mode on
(ido-mode t)

(column-number-mode t)

;; start the emacs server so emacsclient works
(server-start)

;; switching from eshell/term to multi-term
;; (eshell)
;; (multi-term)
